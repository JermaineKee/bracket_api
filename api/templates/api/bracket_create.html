{% extends "api/base.html" %}

{% block content %}

<p class="instructions">Name bracket, add in competitor details, <br> and you're ready to play.</p>
  <form action="" method="post" class="bracket-create-form">
    {% csrf_token %}
    <input type="text" class="bracket-title" name="Title" maxlength="36" size="17" placeholder="Bracket Title"/> <br/>
      <table id="competitors">
          <tr id="new_competitor">
            <td></td>
            <td><input type="text" class="comp_name" name="Competitor1" size="12" autocomplete="off" placeholder="Name"/></td>
            <td><input type="text" class="comp_contact detectTab" name="Competitor_contact1" size="12" autocomplete="off" placeholder="Email/Phone"/></td>
            <td></td>
          </tr>
      </table>

    {# end table here#}
    <p><input type="button" id="add_competitor()" onClick="add_competitor_table()" value="Add Competitor" /></p>
    <br/>
    <p><input type="submit" /></p>

  </form>

<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script>
    $(document).on('keydown', 'input.detectTab', function(e) {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 9) {
      addCompetitor();
    }
  });
</script>

<script type="text/javascript">

var i = 1;
function addCompetitor() {
    i++;
    var div = document.createElement('div');
    div.className = "new_competitor"
    div.innerHTML = '<input type="text" class="comp_name" name="Competitor'+i+'" size="12" autocomplete="off" placeholder="Name"/><input type="text" class="comp_email detectTab" name="Competitor_email'+i+'" size="12" autocomplete="off" placeholder="Email/Phone"/><div class="divider"></div><i id="trash" class="fa fa-trash-o fa-2x" onClick="removeCompetitor(this)">';
    document.getElementById('competitors').appendChild(div);
};


function removeCompetitor(div) {
    document.getElementById('competitors').removeChild( div.parentNode );
    i--;
};

function add_competitor_table() {
  i++;
  var table = document.getElementById("competitors");
  var row = table.insertRow(-1);
  var cell1 = row.insertCell(0);
  var cell2 = row.insertCell(1);
  var cell3 = row.insertCell(2);
  var cell4 = row.insertCell(3);
  cell1.innerHTML = '';
  cell2.innerHTML = '<input type="text" class="comp_name" name="Competitor'+i+'" size="12" autocomplete="off" placeholder="Name"/>';
  cell3.innerHTML = '<input type="text" class="comp_contact detectTab" name="Competitor_contact'+i+'" size="12" autocomplete="off" placeholder="Email/Phone"/>';
  cell4.innerHTML = 'Trash';
};
</script>

{% endblock %}
